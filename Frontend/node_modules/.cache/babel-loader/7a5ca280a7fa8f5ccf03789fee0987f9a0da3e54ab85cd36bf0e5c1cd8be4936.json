{"ast":null,"code":"import _objectSpread from\"C:/Users/Admin/Desktop/demo app english/FullStackAppWebStudyEnglish/Frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from\"react\";import\"./RegisterScreen.css\";import{Link,useNavigate}from\"react-router-dom\";import{useAuth}from\"../contexts/AuthContext\";import{images}from\"../assets/images\";import{Cloud}from\"../components\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const RegisterScreen=()=>{const[formData,setFormData]=useState({firstName:\"\",lastName:\"\",phoneNumber:\"\",email:\"\",password:\"\",confirmPassword:\"\"});const[isLoading,setIsLoading]=useState(false);const[localError,setLocalError]=useState(\"\");const navigate=useNavigate();const{register,error,clearError}=useAuth();const handleChange=e=>{if(error)clearError();// Clear auth context error\nif(localError)setLocalError(\"\");// Clear local error\nsetFormData(_objectSpread(_objectSpread({},formData),{},{[e.target.name]:e.target.value}));};const handleSubmit=async e=>{e.preventDefault();setIsLoading(true);if(formData.password!==formData.confirmPassword){setLocalError(\"Mật khẩu không khớp!\");setIsLoading(false);return;}// Validate phone number (basic Vietnamese phone number validation)\nconst phoneRegex=/^(0[3|5|7|8|9])+([0-9]{8})$/;if(!phoneRegex.test(formData.phoneNumber)){setLocalError(\"Số điện thoại không hợp lệ! Vui lòng nhập số điện thoại 10 chữ số bắt đầu bằng 03, 05, 07, 08, hoặc 09.\");setIsLoading(false);return;}try{// Register user with API\nconst result=await register({firstName:formData.firstName,lastName:formData.lastName,name:\"\".concat(formData.firstName,\" \").concat(formData.lastName),phoneNumber:formData.phoneNumber,email:formData.email,password:formData.password});if(result.success){alert(\"Đăng ký thành công! Vui lòng đăng nhập.\");navigate(\"/login\");}// Error will be handled by AuthContext and shown via error state\n}catch(err){console.error('Registration error:',err);}finally{setIsLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"register-container\",children:[/*#__PURE__*/_jsx(Cloud,{src:images.cloud1,position:\"top-left\"}),/*#__PURE__*/_jsx(Cloud,{src:images.cloud2,position:\"top-right\"}),/*#__PURE__*/_jsx(Cloud,{src:images.cloud3,position:\"bottom-right\"}),/*#__PURE__*/_jsx(\"button\",{className:\"back-button\",onClick:()=>navigate(\"/\"),\"aria-label\":\"Quay l\\u1EA1i\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"register-form\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0110\\u0103ng k\\xFD t\\xE0i kho\\u1EA3n\"}),(error||localError)&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error||localError}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"firstName\",value:formData.firstName,onChange:handleChange,placeholder:\"Nh\\u1EADp v\\xE0o h\\u1ECD c\\u1EE7a b\\u1EA1n\",required:true,disabled:isLoading}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"lastName\",value:formData.lastName,onChange:handleChange,placeholder:\"Nh\\u1EADp v\\xE0o t\\xEAn c\\u1EE7a b\\u1EA1n\",required:true,disabled:isLoading}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",name:\"phoneNumber\",value:formData.phoneNumber,onChange:handleChange,placeholder:\"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\",required:true,disabled:isLoading}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",value:formData.email,onChange:handleChange,placeholder:\"Email\",required:true,disabled:isLoading}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",value:formData.password,onChange:handleChange,placeholder:\"M\\u1EADt kh\\u1EA9u\",required:true,disabled:isLoading}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"confirmPassword\",value:formData.confirmPassword,onChange:handleChange,placeholder:\"X\\xE1c nh\\u1EADn m\\u1EADt kh\\u1EA9u\",required:true,disabled:isLoading}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:isLoading,className:isLoading?'loading':'',children:isLoading?'Đang đăng ký...':'Đăng ký'})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u0110\\xE3 c\\xF3 t\\xE0i kho\\u1EA3n? \",/*#__PURE__*/_jsx(Link,{to:\"/login\",children:\"\\u0110\\u0103ng nh\\u1EADp ngay\"})]})]})]});};export default RegisterScreen;","map":{"version":3,"names":["React","useState","Link","useNavigate","useAuth","images","Cloud","jsx","_jsx","jsxs","_jsxs","RegisterScreen","formData","setFormData","firstName","lastName","phoneNumber","email","password","confirmPassword","isLoading","setIsLoading","localError","setLocalError","navigate","register","error","clearError","handleChange","e","_objectSpread","target","name","value","handleSubmit","preventDefault","phoneRegex","test","result","concat","success","alert","err","console","className","children","src","cloud1","position","cloud2","cloud3","onClick","onSubmit","type","onChange","placeholder","required","disabled","to"],"sources":["C:/Users/Admin/Desktop/demo app english/FullStackAppWebStudyEnglish/Frontend/src/pages/RegisterScreen.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport \"./RegisterScreen.css\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { useAuth } from \"../contexts/AuthContext\";\r\nimport { images } from \"../assets/images\";\r\nimport { Cloud } from \"../components\";\r\n\r\nconst RegisterScreen = () => {\r\n  const [formData, setFormData] = useState({\r\n    firstName: \"\",\r\n    lastName: \"\",\r\n    phoneNumber: \"\",\r\n    email: \"\",\r\n    password: \"\",\r\n    confirmPassword: \"\"\r\n  });\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [localError, setLocalError] = useState(\"\");\r\n  \r\n  const navigate = useNavigate();\r\n  const { register, error, clearError } = useAuth();\r\n\r\n  const handleChange = (e) => {\r\n    if (error) clearError(); // Clear auth context error\r\n    if (localError) setLocalError(\"\"); // Clear local error\r\n    setFormData({\r\n      ...formData,\r\n      [e.target.name]: e.target.value\r\n    });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setIsLoading(true);\r\n    \r\n    if (formData.password !== formData.confirmPassword) {\r\n      setLocalError(\"Mật khẩu không khớp!\");\r\n      setIsLoading(false);\r\n      return;\r\n    }\r\n    \r\n    // Validate phone number (basic Vietnamese phone number validation)\r\n    const phoneRegex = /^(0[3|5|7|8|9])+([0-9]{8})$/;\r\n    if (!phoneRegex.test(formData.phoneNumber)) {\r\n      setLocalError(\"Số điện thoại không hợp lệ! Vui lòng nhập số điện thoại 10 chữ số bắt đầu bằng 03, 05, 07, 08, hoặc 09.\");\r\n      setIsLoading(false);\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      // Register user with API\r\n      const result = await register({\r\n        firstName: formData.firstName,\r\n        lastName: formData.lastName,\r\n        name: `${formData.firstName} ${formData.lastName}`,\r\n        phoneNumber: formData.phoneNumber,\r\n        email: formData.email,\r\n        password: formData.password\r\n      });\r\n      \r\n      if (result.success) {\r\n        alert(\"Đăng ký thành công! Vui lòng đăng nhập.\");\r\n        navigate(\"/login\");\r\n      }\r\n      // Error will be handled by AuthContext and shown via error state\r\n    } catch (err) {\r\n      console.error('Registration error:', err);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"register-container\">\r\n      {/* Clouds decorations */}\r\n      <Cloud src={images.cloud1} position=\"top-left\" />\r\n      <Cloud src={images.cloud2} position=\"top-right\" />\r\n      <Cloud src={images.cloud3} position=\"bottom-right\" />\r\n      \r\n      <button \r\n        className=\"back-button\" \r\n        onClick={() => navigate(\"/\")}\r\n        aria-label=\"Quay lại\"\r\n      />\r\n      <div className=\"register-form\">\r\n        <h2>Đăng ký tài khoản</h2>\r\n        \r\n        {(error || localError) && (\r\n          <div className=\"error-message\">\r\n            {error || localError}\r\n          </div>\r\n        )}\r\n        \r\n        <form onSubmit={handleSubmit}>\r\n          <input\r\n            type=\"text\"\r\n            name=\"firstName\"\r\n            value={formData.firstName}\r\n            onChange={handleChange}\r\n            placeholder=\"Nhập vào họ của bạn\"\r\n            required\r\n            disabled={isLoading}\r\n          />\r\n          <input\r\n            type=\"text\"\r\n            name=\"lastName\"\r\n            value={formData.lastName}\r\n            onChange={handleChange}\r\n            placeholder=\"Nhập vào tên của bạn\"\r\n            required\r\n            disabled={isLoading}\r\n          />\r\n          <input\r\n            type=\"tel\"\r\n            name=\"phoneNumber\"\r\n            value={formData.phoneNumber}\r\n            onChange={handleChange}\r\n            placeholder=\"Số điện thoại\"\r\n            required\r\n            disabled={isLoading}\r\n          />\r\n          <input\r\n            type=\"email\"\r\n            name=\"email\"\r\n            value={formData.email}\r\n            onChange={handleChange}\r\n            placeholder=\"Email\"\r\n            required\r\n            disabled={isLoading}\r\n          />\r\n          <input\r\n            type=\"password\"\r\n            name=\"password\"\r\n            value={formData.password}\r\n            onChange={handleChange}\r\n            placeholder=\"Mật khẩu\"\r\n            required\r\n            disabled={isLoading}\r\n          />\r\n          <input\r\n            type=\"password\"\r\n            name=\"confirmPassword\"\r\n            value={formData.confirmPassword}\r\n            onChange={handleChange}\r\n            placeholder=\"Xác nhận mật khẩu\"\r\n            required\r\n            disabled={isLoading}\r\n          />\r\n          <button \r\n            type=\"submit\"\r\n            disabled={isLoading}\r\n            className={isLoading ? 'loading' : ''}\r\n          >\r\n            {isLoading ? 'Đang đăng ký...' : 'Đăng ký'}\r\n          </button>\r\n        </form>\r\n        <p>\r\n          Đã có tài khoản? <Link to=\"/login\">Đăng nhập ngay</Link>\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RegisterScreen;\r\n\r\n\r\n"],"mappings":"iKAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,MAAO,sBAAsB,CAC7B,OAASC,IAAI,CAAEC,WAAW,KAAQ,kBAAkB,CACpD,OAASC,OAAO,KAAQ,yBAAyB,CACjD,OAASC,MAAM,KAAQ,kBAAkB,CACzC,OAASC,KAAK,KAAQ,eAAe,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEtC,KAAM,CAAAC,cAAc,CAAGA,CAAA,GAAM,CAC3B,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGZ,QAAQ,CAAC,CACvCa,SAAS,CAAE,EAAE,CACbC,QAAQ,CAAE,EAAE,CACZC,WAAW,CAAE,EAAE,CACfC,KAAK,CAAE,EAAE,CACTC,QAAQ,CAAE,EAAE,CACZC,eAAe,CAAE,EACnB,CAAC,CAAC,CACF,KAAM,CAACC,SAAS,CAAEC,YAAY,CAAC,CAAGpB,QAAQ,CAAC,KAAK,CAAC,CACjD,KAAM,CAACqB,UAAU,CAAEC,aAAa,CAAC,CAAGtB,QAAQ,CAAC,EAAE,CAAC,CAEhD,KAAM,CAAAuB,QAAQ,CAAGrB,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAEsB,QAAQ,CAAEC,KAAK,CAAEC,UAAW,CAAC,CAAGvB,OAAO,CAAC,CAAC,CAEjD,KAAM,CAAAwB,YAAY,CAAIC,CAAC,EAAK,CAC1B,GAAIH,KAAK,CAAEC,UAAU,CAAC,CAAC,CAAE;AACzB,GAAIL,UAAU,CAAEC,aAAa,CAAC,EAAE,CAAC,CAAE;AACnCV,WAAW,CAAAiB,aAAA,CAAAA,aAAA,IACNlB,QAAQ,MACX,CAACiB,CAAC,CAACE,MAAM,CAACC,IAAI,EAAGH,CAAC,CAACE,MAAM,CAACE,KAAK,EAChC,CAAC,CACJ,CAAC,CAED,KAAM,CAAAC,YAAY,CAAG,KAAO,CAAAL,CAAC,EAAK,CAChCA,CAAC,CAACM,cAAc,CAAC,CAAC,CAClBd,YAAY,CAAC,IAAI,CAAC,CAElB,GAAIT,QAAQ,CAACM,QAAQ,GAAKN,QAAQ,CAACO,eAAe,CAAE,CAClDI,aAAa,CAAC,sBAAsB,CAAC,CACrCF,YAAY,CAAC,KAAK,CAAC,CACnB,OACF,CAEA;AACA,KAAM,CAAAe,UAAU,CAAG,6BAA6B,CAChD,GAAI,CAACA,UAAU,CAACC,IAAI,CAACzB,QAAQ,CAACI,WAAW,CAAC,CAAE,CAC1CO,aAAa,CAAC,yGAAyG,CAAC,CACxHF,YAAY,CAAC,KAAK,CAAC,CACnB,OACF,CAEA,GAAI,CACF;AACA,KAAM,CAAAiB,MAAM,CAAG,KAAM,CAAAb,QAAQ,CAAC,CAC5BX,SAAS,CAAEF,QAAQ,CAACE,SAAS,CAC7BC,QAAQ,CAAEH,QAAQ,CAACG,QAAQ,CAC3BiB,IAAI,IAAAO,MAAA,CAAK3B,QAAQ,CAACE,SAAS,MAAAyB,MAAA,CAAI3B,QAAQ,CAACG,QAAQ,CAAE,CAClDC,WAAW,CAAEJ,QAAQ,CAACI,WAAW,CACjCC,KAAK,CAAEL,QAAQ,CAACK,KAAK,CACrBC,QAAQ,CAAEN,QAAQ,CAACM,QACrB,CAAC,CAAC,CAEF,GAAIoB,MAAM,CAACE,OAAO,CAAE,CAClBC,KAAK,CAAC,yCAAyC,CAAC,CAChDjB,QAAQ,CAAC,QAAQ,CAAC,CACpB,CACA;AACF,CAAE,MAAOkB,GAAG,CAAE,CACZC,OAAO,CAACjB,KAAK,CAAC,qBAAqB,CAAEgB,GAAG,CAAC,CAC3C,CAAC,OAAS,CACRrB,YAAY,CAAC,KAAK,CAAC,CACrB,CACF,CAAC,CAED,mBACEX,KAAA,QAAKkC,SAAS,CAAC,oBAAoB,CAAAC,QAAA,eAEjCrC,IAAA,CAACF,KAAK,EAACwC,GAAG,CAAEzC,MAAM,CAAC0C,MAAO,CAACC,QAAQ,CAAC,UAAU,CAAE,CAAC,cACjDxC,IAAA,CAACF,KAAK,EAACwC,GAAG,CAAEzC,MAAM,CAAC4C,MAAO,CAACD,QAAQ,CAAC,WAAW,CAAE,CAAC,cAClDxC,IAAA,CAACF,KAAK,EAACwC,GAAG,CAAEzC,MAAM,CAAC6C,MAAO,CAACF,QAAQ,CAAC,cAAc,CAAE,CAAC,cAErDxC,IAAA,WACEoC,SAAS,CAAC,aAAa,CACvBO,OAAO,CAAEA,CAAA,GAAM3B,QAAQ,CAAC,GAAG,CAAE,CAC7B,aAAW,eAAU,CACtB,CAAC,cACFd,KAAA,QAAKkC,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5BrC,IAAA,OAAAqC,QAAA,CAAI,wCAAiB,CAAI,CAAC,CAEzB,CAACnB,KAAK,EAAIJ,UAAU,gBACnBd,IAAA,QAAKoC,SAAS,CAAC,eAAe,CAAAC,QAAA,CAC3BnB,KAAK,EAAIJ,UAAU,CACjB,CACN,cAEDZ,KAAA,SAAM0C,QAAQ,CAAElB,YAAa,CAAAW,QAAA,eAC3BrC,IAAA,UACE6C,IAAI,CAAC,MAAM,CACXrB,IAAI,CAAC,WAAW,CAChBC,KAAK,CAAErB,QAAQ,CAACE,SAAU,CAC1BwC,QAAQ,CAAE1B,YAAa,CACvB2B,WAAW,CAAC,4CAAqB,CACjCC,QAAQ,MACRC,QAAQ,CAAErC,SAAU,CACrB,CAAC,cACFZ,IAAA,UACE6C,IAAI,CAAC,MAAM,CACXrB,IAAI,CAAC,UAAU,CACfC,KAAK,CAAErB,QAAQ,CAACG,QAAS,CACzBuC,QAAQ,CAAE1B,YAAa,CACvB2B,WAAW,CAAC,2CAAsB,CAClCC,QAAQ,MACRC,QAAQ,CAAErC,SAAU,CACrB,CAAC,cACFZ,IAAA,UACE6C,IAAI,CAAC,KAAK,CACVrB,IAAI,CAAC,aAAa,CAClBC,KAAK,CAAErB,QAAQ,CAACI,WAAY,CAC5BsC,QAAQ,CAAE1B,YAAa,CACvB2B,WAAW,CAAC,mCAAe,CAC3BC,QAAQ,MACRC,QAAQ,CAAErC,SAAU,CACrB,CAAC,cACFZ,IAAA,UACE6C,IAAI,CAAC,OAAO,CACZrB,IAAI,CAAC,OAAO,CACZC,KAAK,CAAErB,QAAQ,CAACK,KAAM,CACtBqC,QAAQ,CAAE1B,YAAa,CACvB2B,WAAW,CAAC,OAAO,CACnBC,QAAQ,MACRC,QAAQ,CAAErC,SAAU,CACrB,CAAC,cACFZ,IAAA,UACE6C,IAAI,CAAC,UAAU,CACfrB,IAAI,CAAC,UAAU,CACfC,KAAK,CAAErB,QAAQ,CAACM,QAAS,CACzBoC,QAAQ,CAAE1B,YAAa,CACvB2B,WAAW,CAAC,oBAAU,CACtBC,QAAQ,MACRC,QAAQ,CAAErC,SAAU,CACrB,CAAC,cACFZ,IAAA,UACE6C,IAAI,CAAC,UAAU,CACfrB,IAAI,CAAC,iBAAiB,CACtBC,KAAK,CAAErB,QAAQ,CAACO,eAAgB,CAChCmC,QAAQ,CAAE1B,YAAa,CACvB2B,WAAW,CAAC,qCAAmB,CAC/BC,QAAQ,MACRC,QAAQ,CAAErC,SAAU,CACrB,CAAC,cACFZ,IAAA,WACE6C,IAAI,CAAC,QAAQ,CACbI,QAAQ,CAAErC,SAAU,CACpBwB,SAAS,CAAExB,SAAS,CAAG,SAAS,CAAG,EAAG,CAAAyB,QAAA,CAErCzB,SAAS,CAAG,iBAAiB,CAAG,SAAS,CACpC,CAAC,EACL,CAAC,cACPV,KAAA,MAAAmC,QAAA,EAAG,sCACgB,cAAArC,IAAA,CAACN,IAAI,EAACwD,EAAE,CAAC,QAAQ,CAAAb,QAAA,CAAC,+BAAc,CAAM,CAAC,EACvD,CAAC,EACD,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAlC,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}